# р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕г Optimize р╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕гр╕░р╕Ър╕Ъ

## ЁЯУЛ р╣Др╕Яр╕ер╣Мр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕╢р╣Йр╕Щ

### 1. р╣Др╕Яр╕ер╣Мр╕Чр╕Фр╕кр╕нр╕Ъ API Performance
- **`optimize-system.ps1`** - р╕Чр╕Фр╕кр╕нр╕Ъ API Performance (PowerShell)
- **`optimize-system.bat`** - р╕Чр╕Фр╕кр╕нр╕Ъ API Performance (Batch)

### 2. р╣Др╕Яр╕ер╣Мр╕Чр╕Фр╕кр╕нр╕Ъ Database Performance
- **`test-db-performance.ps1`** - р╕Чр╕Фр╕кр╕нр╕Ъ Database Performance р╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф

### 3. р╣Др╕Яр╕ер╣М Optimize Database
- **`optimize-database-indexes.sql`** - р╣Ар╕Юр╕┤р╣Ир╕б Indexes р╕кр╕│р╕лр╕гр╕▒р╕Ъ Database

### 4. р╣Др╕Яр╕ер╣Мр╕гр╕▒р╕Щ Optimize р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- **`run-optimize.ps1`** - р╣Ар╕бр╕Щр╕╣р╕лр╕ер╕▒р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕▒р╕Щ Optimize р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╣Гр╕Кр╣Йр╣Ар╕бр╕Щр╕╣р╕лр╕ер╕▒р╕Б (р╣Бр╕Щр╕░р╕Щр╕│)
```powershell
.\run-optimize.ps1
```

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╕гр╕▒р╕Щр╣Бр╕вр╕Бр╕Бр╕▒р╕Щ

#### р╕Чр╕Фр╕кр╕нр╕Ъ API Performance:
```powershell
.\optimize-system.ps1
```

#### р╕Чр╕Фр╕кр╕нр╕Ъ Database Performance:
```powershell
.\test-db-performance.ps1
```

#### р╣Ар╕Юр╕┤р╣Ир╕б Database Indexes:
```powershell
# р╕гр╕▒р╕Щр╕Ьр╣Ир╕▓р╕Щр╣Ар╕бр╕Щр╕╣р╕лр╕ер╕▒р╕Б р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Й MySQL client р╣Вр╕Фр╕вр╕Хр╕гр╕З
mysql -u root -p < optimize-database-indexes.sql
```

## ЁЯУК р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕Фр╕кр╕нр╕Ъ

### API Performance Test
1. **Backend Connection** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Backend
2. **Work Plans API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Work Plans
3. **Drafts API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Drafts
4. **Sync API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г Sync Drafts to Plans
5. **Reports API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Reports
6. **Users API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Users
7. **Machines API** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Machines

### Database Performance Test
1. **Work Plans Count** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Щр╕▒р╕Ър╕Ир╕│р╕Щр╕зр╕Щ Work Plans
2. **Work Plans By Date** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▓р╕бр╕зр╕▒р╕Щр╕Чр╕╡р╣И
3. **Drafts Query** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е Drafts
4. **JOIN Query** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г JOIN р╕Вр╣Йр╕нр╕бр╕╣р╕е
5. **GROUP BY Query** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г GROUP BY
6. **LIKE Query** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╣Бр╕Ър╕Ъ LIKE
7. **ORDER BY Query** - р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕г ORDER BY

## ЁЯОп р╣Ар╕Бр╕Ур╕Ср╣Мр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щ

### API Performance
- **ЁЯЪА р╣Ар╕гр╣Зр╕зр╕бр╕▓р╕Б**: р╕Щр╣Йр╕нр╕вр╕Бр╕зр╣Ир╕▓ 1 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡
- **тЪб р╣Ар╕гр╣Зр╕з**: 1-3 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡
- **тП│ р╕Ыр╕▓р╕Щр╕Бр╕ер╕▓р╕З**: 3-5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡
- **ЁЯРМ р╕Кр╣Йр╕▓**: р╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓ 5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡

### Database Performance
- **ЁЯЪА р╣Ар╕гр╣Зр╕зр╕бр╕▓р╕Б**: р╕Щр╣Йр╕нр╕вр╕Бр╕зр╣Ир╕▓ 50ms
- **тЪб р╣Ар╕гр╣Зр╕з**: 50-100ms
- **тП│ р╕Ыр╕▓р╕Щр╕Бр╕ер╕▓р╕З**: 100-200ms
- **ЁЯРМ р╕Кр╣Йр╕▓**: р╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓ 200ms

## ЁЯФз р╕Бр╕▓р╕г Optimize р╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│

### 1. Database Indexes
```sql
-- Indexes р╕лр╕ер╕▒р╕Бр╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│
CREATE INDEX idx_work_plans_production_date ON work_plans(production_date);
CREATE INDEX idx_work_plans_job_code ON work_plans(job_code);
CREATE INDEX idx_work_plans_status_id ON work_plans(status_id);
CREATE INDEX idx_drafts_workflow_status ON work_plan_drafts(workflow_status_id);
CREATE INDEX idx_drafts_production_date ON work_plan_drafts(production_date);
```

### 2. Caching
- р╣Гр╕Кр╣Й Redis р╕кр╕│р╕лр╕гр╕▒р╕Ъ caching р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Ар╕гр╕╡р╕вр╕Бр╕Ър╣Ир╕нр╕в
- Cache р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Вр╕нр╕З API р╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ър╣Ир╕нр╕в
- Cache р╕Вр╣Йр╕нр╕бр╕╣р╕е Users, Machines, Production Rooms

### 3. Query Optimization
- р╣Гр╕Кр╣Й LIMIT р╣Гр╕Щ queries р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- р╕лр╕ер╕╡р╕Бр╣Ар╕ер╕╡р╣Ир╕вр╕З SELECT * р╣Гр╕Кр╣Йр╣Ар╕Йр╕Юр╕▓р╕░ columns р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
- р╣Гр╕Кр╣Й EXPLAIN р╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ query performance

### 4. Connection Pooling
- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ connection pool р╣Гр╕лр╣Йр╣Ар╕лр╕бр╕▓р╕░р╕кр╕б
- р╣Гр╕Кр╣Й connection pooling р╣Гр╕Щ production

## ЁЯУИ р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Ьр╕е

### р╕Бр╣Ир╕нр╕Щ Optimize
1. р╕гр╕▒р╕Щ `test-db-performance.ps1`
2. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### р╕лр╕ер╕▒р╕З Optimize
1. р╣Ар╕Юр╕┤р╣Ир╕б Database Indexes
2. р╕гр╕▒р╕Щ `test-db-performance.ps1` р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
3. р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### р╕Бр╕▓р╕гр╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ъ
- р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╣Ар╕зр╕ер╕▓р╣Ар╕Йр╕ер╕╡р╣Ир╕в
- р╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╣Ар╕зр╕ер╕▓р╕кр╕╣р╕Зр╕кр╕╕р╕Ф-р╕Хр╣Ир╕│р╕кр╕╕р╕Ф
- р╕Фр╕╣р╕Ир╕│р╕Щр╕зр╕Щ queries р╕Чр╕╡р╣Ир╕кр╕│р╣Ар╕гр╣Зр╕И

## ЁЯЫая╕П р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Ыр╕▒р╕Нр╕лр╕▓: Backend р╣Др╕бр╣Ир╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
```powershell
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Backend р╕гр╕▒р╕Щр╕нр╕вр╕╣р╣И
cd backend
npm start
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: Database р╣Др╕бр╣Ир╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
```powershell
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ MySQL service
net start mysql
```

### р╕Ыр╕▒р╕Нр╕лр╕▓: Indexes р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕Фр╣Й
```sql
-- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М
SHOW GRANTS FOR CURRENT_USER();

-- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Indexes р╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣И
SHOW INDEX FROM work_plans;
```

## ЁЯУЭ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М
```
ЁЯУК р╕кр╕Цр╕┤р╕Хр╕┤р╣Вр╕Фр╕вр╕гр╕зр╕б:
   р╕Ир╕│р╕Щр╕зр╕Щ API р╕Чр╕╡р╣Ир╕Чр╕Фр╕кр╕нр╕Ъ: 7
   р╕Ир╕│р╕Щр╕зр╕Щ API р╕Чр╕╡р╣Ир╕кр╕│р╣Ар╕гр╣Зр╕И: 7
   р╣Ар╕зр╕ер╕▓р╕гр╕зр╕б: 2450 ms
   р╣Ар╕зр╕ер╕▓р╣Ар╕Йр╕ер╕╡р╣Ир╕в: 350 ms

ЁЯОп р╕Бр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Ю:
   тЪб р╕гр╕░р╕Ър╕Ър╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕гр╣Зр╕з (1-3 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡)
```

## ЁЯФД р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Ыр╣Зр╕Щр╕Ыр╕гр╕░р╕Ир╕│

### р╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕╕р╕Бр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣М
1. р╕гр╕▒р╕Щ API Performance Test
2. р╕гр╕▒р╕Щ Database Performance Test
3. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### р╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
1. р╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И
2. р╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З code
3. р╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╣Ар╕Юр╕┤р╣Ир╕б features р╣Гр╕лр╕бр╣И

## ЁЯУЮ р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╣Ир╕н

р╕лр╕▓р╕Бр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓р╕лр╕гр╕╖р╕нр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н:
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ log р╣Гр╕Щ Backend console
2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ error messages
3. р╣Гр╕Кр╣Й Developer Tools р╣Гр╕Щ browser
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Network tab р╕кр╕│р╕лр╕гр╕▒р╕Ъ API calls 