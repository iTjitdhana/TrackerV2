# Special Jobs Sorting Fix Report

## üéØ **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö**

### **‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤**
- ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (status_id = 10) ‡∏õ‡∏ô‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
- ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏≠‡∏Å‡∏°‡∏≤

### **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤**
- Logic ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô `handleSyncDrafts` ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
- ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `workflow_status_id = 10`

## üîß **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥**

### **1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö**
**‡πÑ‡∏ü‡∏•‡πå:** `frontend/Production_Planing.tsx` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1250-1285)

**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:**
```typescript
// ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏° logic ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
const filtered = productionData
  .filter(item => item.production_date === selectedDate && !(item.isDraft && defaultCodes.includes(item.job_code)))
  .sort((a, b) => {
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô
  });
```

**‡πÄ‡∏õ‡πá‡∏ô:**
```typescript
// ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (status_id = 10)
const normalJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  item.workflow_status_id !== 10 // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);

const specialJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  item.workflow_status_id === 10 // ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏ï‡∏≤‡∏° logic ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
const sortedNormalJobs = normalJobs.sort((a, b) => {
  // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô
});

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤
const sortedSpecialJobs = specialJobs.sort((a, b) => {
  const timeA = a.start_time || "00:00";
  const timeB = b.start_time || "00:00";
  return timeA.localeCompare(timeB);
});

// ‡∏£‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ + ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î)
const filtered = [...sortedNormalJobs, ...sortedSpecialJobs];
```

### **2. ‡πÄ‡∏û‡∏¥‡πà‡∏° workflow_status_id ‡πÉ‡∏ô Interface**
**‡πÑ‡∏ü‡∏•‡πå:** `frontend/types/production.ts`

```typescript
export interface ProductionItem {
  // ... existing properties
  workflow_status_id?: number; // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö workflow status ID
}
```

### **3. Import Helper Functions**
**‡πÑ‡∏ü‡∏•‡πå:** `frontend/Production_Planing.tsx`

```typescript
import { getOperatorsArray, getOperatorsString } from "@/lib/utils";
```

## üìä **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á**

### **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô Google Sheet:**
1. **‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô
2. **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î)

### **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö:**
```
‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ - ‡∏≠‡∏≤‡∏£‡πå‡∏° (08:00-10:00)
‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ - ‡∏à‡∏£‡∏±‡∏ç (09:00-11:00)
‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ - ‡∏û‡∏µ‡πà‡∏ï‡∏∏‡πà‡∏ô (10:00-12:00)
...
‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà N: ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© - ‡πÅ‡∏°‡∏ô (09:30-11:00) ‚Üê ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î
```

## ‚ö†Ô∏è **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà (Type Errors)**

### **1. Operators Type Issues**
- ‡∏¢‡∏±‡∏á‡∏°‡∏µ `operators.split()` ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î
- ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ `getOperatorsArray()` helper function ‡πÅ‡∏ó‡∏ô

### **2. Boolean Comparison Issues**
- ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö boolean ‡∏Å‡∏±‡∏ö number
- ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç logic ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

### **3. Missing Properties**
- `production_room` property ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô interface
- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ property ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üöÄ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ**

### **1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Type Errors**
```typescript
// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ operators
const operatorA = getOperatorsArray(a.operators)[0] || "";
const operatorB = getOperatorsArray(b.operators)[0] || "";

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö boolean
if (item.workflow_status_id === 10) // ‡πÅ‡∏ó‡∏ô item.is_special === true
```

### **2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
2. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô Google Sheet
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs

### **3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Data Structure**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `workflow_status_id` ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ data ‡∏°‡∏≤‡∏à‡∏≤‡∏Å API ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üìù **‡∏™‡∏£‡∏∏‡∏õ**

**‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ:**
1. **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î** ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
2. **‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° logic ‡πÄ‡∏î‡∏¥‡∏°** (‡πÄ‡∏ß‡∏•‡∏≤ + ‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô)
3. **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
2. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô Google Sheet

**‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `workflow_status_id` ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs
3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç type errors ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
