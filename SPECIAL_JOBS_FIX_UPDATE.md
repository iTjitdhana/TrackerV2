# Special Jobs Fix Update Report

## üéØ **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö**

### **‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤**
- ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏¢‡∏±‡∏á‡∏õ‡∏ô‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏ô Google Sheet
- ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á
- Logic ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô

### **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤**
1. **Logic ‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô**
   - `getSortedDailyProduction` ‡πÉ‡∏ä‡πâ `is_special === 1`
   - `handleSyncDrafts` ‡πÉ‡∏ä‡πâ `workflow_status_id === 10`
   - ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô

2. **Type Issues**
   - `is_special` ‡πÉ‡∏ô interface ‡πÄ‡∏õ‡πá‡∏ô `boolean` ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô `number`
   - ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üîß **‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥**

### **1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©**
**‡πÑ‡∏ü‡∏•‡πå:** `frontend/Production_Planing.tsx` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1250-1270)

**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:**
```typescript
// ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (status_id = 10)
const normalJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  item.workflow_status_id !== 10 // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);

const specialJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  item.workflow_status_id === 10 // ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);
```

**‡πÄ‡∏õ‡πá‡∏ô:**
```typescript
// ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡πÉ‡∏ä‡πâ is_special = 1 ‡∏´‡∏£‡∏∑‡∏≠ workflow_status_id = 10)
const normalJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  item.is_special !== 1 && 
  item.workflow_status_id !== 10 // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);

const specialJobs = productionData.filter(item => 
  item.production_date === selectedDate && 
  !(item.isDraft && defaultCodes.includes(item.job_code)) &&
  (item.is_special === 1 || item.workflow_status_id === 10) // ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
);
```

### **2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Interface Type**
**‡πÑ‡∏ü‡∏•‡πå:** `frontend/types/production.ts`

```typescript
export interface ProductionItem {
  // ... existing properties
  is_special?: boolean | number; // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö special jobs (boolean ‡∏´‡∏£‡∏∑‡∏≠ number)
  workflow_status_id?: number; // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö workflow status ID
}
```

### **3. ‡πÄ‡∏û‡∏¥‡πà‡∏° Debug Logging**
```typescript
// Debug: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô
console.log("üîç [DEBUG] ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:");
console.log("üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥:", normalJobs.length, "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
console.log("üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:", specialJobs.length, "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
console.log("üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥:", normalJobs.map(item => ({ 
  job_name: item.job_name, 
  is_special: item.is_special, 
  workflow_status_id: item.workflow_status_id 
})));
console.log("üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:", specialJobs.map(item => ({ 
  job_name: item.job_name, 
  is_special: item.is_special, 
  workflow_status_id: item.workflow_status_id 
})));
```

## üìä **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á**

### **‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:**
- **‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥**: `is_special !== 1` ‡πÅ‡∏•‡∏∞ `workflow_status_id !== 10`
- **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©**: `is_special === 1` ‡∏´‡∏£‡∏∑‡∏≠ `workflow_status_id === 10`

### **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•:**
1. **‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô
2. **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î)

## üß™ **‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö**

### **1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console Logs**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:
```
üîç [DEBUG] ‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:
üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥: X ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©: Y ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥: [{job_name: "...", is_special: 0, workflow_status_id: 3}, ...]
üîç [DEBUG] ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©: [{job_name: "...", is_special: 1, workflow_status_id: 10}, ...]
```

### **2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Google Sheet**
- ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
- ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î
- ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏õ‡∏ô‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥

### **3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**
```sql
-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
SELECT * FROM work_plans 
WHERE is_special = 1 OR workflow_status_id = 10 
AND production_date = '2025-08-11';

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
SELECT * FROM work_plans 
WHERE (is_special != 1 OR is_special IS NULL) 
AND (workflow_status_id != 10 OR workflow_status_id IS NULL)
AND production_date = '2025-08-11';
```

## ‚ö†Ô∏è **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà**

### **1. Type Errors**
- ‡∏¢‡∏±‡∏á‡∏°‡∏µ `operators.split()` ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î
- ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ `getOperatorsArray()` helper function ‡πÅ‡∏ó‡∏ô

### **2. Missing Properties**
- `production_room` property ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô interface
- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ property ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üöÄ **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ**

### **1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©
2. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô Google Sheet

### **2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Type Errors**
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ operators
- ‡πÄ‡∏û‡∏¥‡πà‡∏° missing properties ‡πÉ‡∏ô interface

### **3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Data Consistency**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ data ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ API ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## üìù **‡∏™‡∏£‡∏∏‡∏õ**

**‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ:**
1. **Logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô** ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á UI ‡πÅ‡∏•‡∏∞ Google Sheet
2. **‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î** ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
3. **‡∏°‡∏µ debug logging** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô Google Sheet

**‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console logs ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç type errors ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
